BOT_TOKEN=123456:telegram-bot-token
PORT=3000
DB_PATH=./data/bot.sqlite
# Number of reverse proxy hops to trust for req.ip / X-Forwarded-For parsing (0 = disable trust).
# Set to 1 when running behind a single reverse proxy like Nginx/Caddy on the same server.
TRUST_PROXY_HOPS=0

# Optional DB maintenance (cleanup expired checkout tokens and old webhook events)
ENABLE_DB_MAINTENANCE=false
DB_MAINTENANCE_INTERVAL_MINUTES=60
WEBHOOK_EVENTS_RETENTION_DAYS=90

# Feature flag: set to "true" to enable payment/subscription features
# Set to "false" or omit to test the bot without payments (grants access immediately)
ENABLE_PAYMENTS=false

# Startup audio recovery/upload is disabled by default (recommended for production).
# Enable only if you explicitly want background recovery on process start.
ENABLE_STARTUP_AUDIO_RECOVERY=false

# Raw webhook body size limit (bytes) for express.raw(); raise only if your provider requires it.
WEBHOOK_RAW_BODY_LIMIT_BYTES=262144

# GoHighLevel / Stripe (via GHL) - Required only if ENABLE_PAYMENTS=true
# Template must include "{telegram_user_id}" which will be replaced with the numeric Telegram user id.
GHL_CHECKOUT_URL_TEMPLATE=https://your-ghl-checkout-link?telegram_user_id={telegram_user_id}

# Static link to your customer portal / manage subscription page.
MANAGE_SUBSCRIPTION_URL=https://your-ghl-or-stripe-customer-portal-link

# Coupon configured to apply to the NEXT invoice only (no proration/refunds).
RETENTION_COUPON_CODE=YOUR_COUPON_CODE

# Webhook auth (prefer signature verification using raw body) - Required only if ENABLE_PAYMENTS=true
GHL_WEBHOOK_SECRET=

# Fallback if signature headers aren't available in your GHL tenant
WEBHOOK_TOKEN=

# Production safety valve: if NODE_ENV=production and you're still using token auth temporarily,
# set this to true to bypass the startup guard. Prefer configuring GHL_WEBHOOK_SECRET instead.
ALLOW_INSECURE_WEBHOOK_TOKEN_IN_PROD=false

# Optional: used only if webhook payload omits telegram_user_id but includes contactId
GHL_API_BASE_URL=https://services.leadconnectorhq.com
GHL_API_KEY=
# Optional: required in some tenants for contact search / subscription lookup
GHL_LOCATION_ID=

# Optional: resync cooldown in minutes (default 10). Set to 0 to disable cooldown.
RESYNC_COOLDOWN_MINUTES=10

# Optional: comma-separated list of Telegram numeric user ids allowed to run admin ingest commands
# Example: ADMIN_TELEGRAM_USER_IDS=123456789,987654321
ADMIN_TELEGRAM_USER_IDS=
